function adjustDomain(t){return t[0]>0?t[0]=0:t[1]<0&&(t[1]=0),t}function unionBounds(t,n){var i=t.concat(n);return t.equals([0,0])?n:n.equals([0,0])?t:[d3.min(i),d3.max(i)]}Array.prototype.equals&&console.warn("Overriding existing Array.prototype.equals. Possible causes: New API defines the method, there's a framework conflict or you've got double inclusions in your code."),Array.prototype.equals=function(t){if(!t)return!1;if(this.length!=t.length)return!1;for(var n=0,i=this.length;i>n;n++)if(this[n]instanceof Array&&t[n]instanceof Array){if(!this[n].equals(t[n]))return!1}else if(this[n]!=t[n])return!1;return!0},Object.defineProperty(Array.prototype,"equals",{enumerable:!1}),d3graphs={line:function(t,n){function i(t,n){function i(t,n){var i=[],e=[],r=[],a=[],o=function(t,n,i){a.map(function(e){e.binding(t,n,i)})},l=function(){r=i.length<e?i.map(function(t,n){return{x:i[n],y:e[n]}}):e.map(function(t,n){return{x:i[n],y:e[n]}})},u=c.append("path").attr("class","line").attr("fill","none").attr("stroke","#000").attr("stroke-width","10");void 0!==n&&u.attr("stroke",n),this.x=function(t){return void 0===t?i:(i=t,l(),o(i,e),this)},this.y=function(t){return void 0===t?e:(e=t,l(),o(i,e),this)};var d=1,f=[0,0],h=void 0,p=function(){i=[f[0]];var t=f[1]-f[0];t/=d;for(var n=0;d>n;++n)i.push(f[0]+n*t);e=i.map(h),l()};this.interpolate=function(t){if(!(t<i[0]||t>i[i.length-1])){for(var n=i.length/2,r=0,a=0;;){if(++a,t>=i[n]){if(t<i[n+1])break;r=n,n+=(i.length-n)/2}else{if(t>i[n-1]){--n;break}n-=(n-r)/2}if(0==Math.floor(n))break;if(n=Math.round(n),n==i.length){--n;break}}var o=(e[n+1]-e[n])/(i[n+1]-i[n]),s=t-i[n];return e[n]+o*s}},this.map={domain:function(t,n){return void 0===t?f:(f=[t,n],d>1&&void 0!==h&&p(),this)},intervals:function(t){return void 0===t?d:(f!=[0,0]&&void 0!==h&&p(),d=t,this)},f:function(t){return h=t,f.equals([0,0])||1==d||p(),this}},this.detail={addBinding:function(t,n){a.push({seriesName:t,binding:n})},removeBinding:function(t){a.filter(function(t){return t.seriesName!=t})}},this.bind=function(n,r){var a=void 0;return n in z&&(a=z[n]),i=a.x(),e=a.y().map(r),a.detail.addBinding(t,function(t,n,a){t instanceof Array||(t=[t]),n instanceof Array||(n=[n]);var o=n.map(r);a?(i=i.concat(t),e=e.concat(o)):(i=t,e=o),l()}),this},this.append={x:function(t){var n=i.length;i=i.concat(t);var r=i.length;if(l(),e.length>n){var a=d3.min([r-n,e.length-n]),s=i.slice(-a),u=e.slice(-a);o(s,u,!0)}return this},y:function(t){var n=e.length;e=e.concat(t);var r=e.length;if(l(),e.length>n){var a=d3.min([r-n,e.length-n]),s=i.slice(-a),u=e.slice(-a);o(s,u,!0)}return this}},this.zip=function(){return r},this.tooltipGroup=s.append("g").attr("class","graph-tooltip-selection"),this.tooltipCircle=this.tooltipGroup.append("circle").attr("fill","black"),void 0!==n&&this.tooltipCircle.attr("fill",n)}var e=[-1,-1],r=d3.line().x(function(t){return x(t.x)}).y(function(t){return b(t.y)}),a=0,o=0,s=d3.select("body").append("svg").attr("id",t),l=s.append("g").attr("class","title-box"),u=l.append("text"),c=s.append("g").attr("class","graph-body").style("z-index","0"),d=s.append("g").attr("class","axis--x"),f=s.append("g").attr("class","axis--y"),h=d3.select("body").append("div").attr("class","graph-tooltip").style("position","absolute").style("z-index","10").style("visibility","hidden"),p=d.append("text").style("text-anchor","end").attr("class","x-label").attr("fill","#000").attr("x","90%").attr("dy","-.71em").text(""),v=f.append("text").attr("transform","rotate(-90)").style("text-anchor","end").attr("class","y-label").attr("fill","#000").attr("y",6).attr("dy",".71em").text("");h.append("p");var y=!1,g=function(t){return h.style("visibility",t)},m=function(t){var n=B({x:t[0],y:t[0]}),i=[{series:"x",value:x.invert(t[0])}].concat(n);h.selectAll("p").data(i).text(function(t){return t.series+": "+t.value.toPrecision(3)}).style("visibility","inherit").exit().style("visibility","hidden").text("");for(var r=0;r<n.length;++r){var o,s,l=z[n[r].series];o=A.left+t[0],s=A.top+b(n[r].value),isNaN(s)||(l.tooltipGroup.attr("transform","translate("+o+","+s+")").style("visibility","visible"),l.tooltipCircle.attr("r",a/100))}return e=t,h};c.on("mouseover",function(){return y=!0,g("visible")}).on("mousemove",function(){var t=d3.mouse(this);return h.style("top",d3.event.pageY-10+"px").style("left",d3.event.pageX+10+"px"),m(t)}).on("mouseout",function(){y=!1;for(var t in z)if(z.hasOwnProperty(t)){var n=z[t];n.tooltipGroup.style("visibility","hidden")}return g("hidden")}).append("rect").attr("fill","white");var x=d3.scaleLinear(),b=d3.scaleLinear(),k=d3.axisBottom(),w=d3.axisLeft(),A={top:50,right:20,bottom:30,left:50};this.margin={top:function(t){return A.top=t,q(),this},right:function(t){return A.right=t,q(),this},bottom:function(t){return A.bottom=t,q(),this},left:function(t){return A.left=t,q(),this},setAll:function(t,n,i,e){return A.top=t,A.right=n,A.left=e,A.bottom=i,q(),this}};var q=function(){var t,n;t=x(0),n=b(0);var i=x.range().sort(d3.ascending),e=b.range().sort(d3.ascending);(t<i[0]||t>i[1])&&(t=0),(n<e[0]||n>e[1])&&(n=e[1]),s.attr("width",a+A.left+A.right).attr("height",o+A.top+A.bottom),l.attr("transform","translate("+(A.left+.5*a)+","+.8*A.top+")"),c.attr("transform","translate("+A.left+","+A.top+")").style("z-index","0"),c.select("rect").attr("width",a).attr("height",o),d.attr("transform","translate("+A.left+","+(n+A.top)+")"),f.attr("transform","translate("+(t+A.left)+", "+A.top+")")},B=function(t){var n=t.x,i=[],e=x.invert(n);for(var r in z)if(z.hasOwnProperty(r)){var a=z[r],o=a.interpolate(e);if(void 0===o)continue;i.push({series:r,value:o})}return i},P=!1;this.includeOrigin=function(t){return void 0===t?P:(P=t,this)},this.width=function(t){return s.attr("width",t),a=t,c.attr("transform","translate("+.05*a+","+.05*o+")"),q(),this},this.height=function(t){return s.attr("height",t),o=t,c.attr("transform","translate("+.05*a+","+.05*o+")"),q(),this};var z={};this.data=function(t,n){if(void 0===t)return z;if(t in z)return z[t];var e=new i(t,n);return h.append("p"),z[t]=e,e};var N=function(){k.scale(x),w.scale(b),d.call(k),f.call(w)};return this.update=function(){var t=[0,0],i=[0,0],s=[];for(var l in z){var d=z[l],f=d3.extent(d.x()),h=d3.extent(d.y());t=unionBounds(t,f),i=unionBounds(i,h),s.push(d.zip())}P&&(t=adjustDomain(t),i=adjustDomain(i)),x.domain(t).range([0,a]),b.domain(i).range([o,0]),q(),c.selectAll("path").data(s).attr("d",r),u.text(n),N(),y&&m(e)},this.axis={x:{label:function(t){return void 0===t?p.text():(p.text(t),this)},ticks:function(t){return void 0===t?k.ticks():(k.ticks(t),this)}},y:{label:function(t){return void 0===t?v.text():(v.text(t),this)},ticks:function(t){return void 0===t?w.ticks():(w.ticks(t),this)}}},q(),this}return new i(t,n)}};